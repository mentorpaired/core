language: python
python:
- '3.6'
install:
- pip install -r requirements.txt
services:
- postgresql
before_script:
- psql -c 'create database travis_ci_test;' -U postgres
- python manage.py migrate --settings=backend.settings.test
script:
- coverage run --source=app manage.py test --settings=backend.settings.test
- flake8 .
after_success: coveralls
notifications:
  slack:
    secure: P4pAqu1yIpijZi8hZGf2MB6+1DCLjreYgTCeoUBqy0eHHemcYc39cgQQ1p6icpf4vEeopK20R1pHGtBb73qn53+wGAlgPU3b1hSJVwSJwUkryDJavmMUVciDQdIMeigL1p4v1KnFwJXN42+dtrC5zXr4DJ0cQK098Ha4kCqGHaDZ4SUvB1Qa9Zvo5cL6mAF2CpyRPcqq9ggvKfuO0UZy67lYaTJyeDtDNRZY8OdyZ0ydQmb2zY1niA2BqRS9dYsBVeLR12fIh+wQX6hg1QZM2tLfRQvNF2kZ6O1HMwqXbzUWmQZIIsXtG8QJH9yuXPdtd1borFIyOATyA5ouRIey0vMK1jK9qFjY03PcD24icIi2KV3kGUJzfJFf7KWUPDoF6aHQJ1PIHtvotXlo/ySX9voZq0amjjTJp7ox8jRg/HLE7M8KV6Serryy0GVHCavnQr7L79hi5kCoxX6Wt097g25ltFhrx1qU/sZAS/rOUOpX5H4UuCHk6x7vqdUMkxNFtGGO/c2GfauUMGTFzCyP6tby1SBty/48uwrM0kApohw2ZWKIHsTwiSMybV+w4cqkHQDtko3Flks44IKIVlRbq6yJpeNAnF5zhjxk8wkzfBd/+t+NVbiwpG+KbqNHP+Uyn+T6u1VsntuO4UEQT7D6ijj0YZ2Pdk8InrSBc31Xbb0=
deploy:
  provider: heroku
  api_key:
    secure: F4YHpdSoPdo/fo/KFOEpaAXXI6/+m2eY7vIblszwzqg2h86QM4/09S2YuGWO/pRsQbkGlPjm/oJzFqyG3xuOVOyV3+RgR5fJm0W4SymFEG5nGcM3aWvxB4xHPMQz/F2R1qXhvIrR5oPOOH2BQaKGGAW1LtaaOrl0+YyiXCbld70M8/DgPS2vuBg84KE7k2PFqzp0oW8nv752fXb29RIoVqIJgmwiNv3d8Oz1lqMg/klcm52rmQD99hOGCdD1I3/dhaAcjdNYUYRq47U55NwsNpvIXSAy4qf278zUI/eR9IeVB06nc5de4+g6TwzPdUAANzMi8Rm3J7XUdyFPSYkwz5IK4g9tz/EtMlxzvv1wWxeU4HnPziYNYHZpv4HjDcBiefl7hExJvLvItLUUp8cpvGZy+cuKSt3fc4hVHrs+sbKCcb3L0Qf38r3x3RQqit2WtOk7QkqAG7RQi5d+p7a7aJ3bfUlwAjRKaehsRTaV8GkrAzN+/PmhCiA6TsQaYUSxe7kqXKW10b9VKwq6y803ddLpbS6L+r60sR4AtvZz1QDwoFcKcoFM97tBzVcmzO77Iv/3OeOOw/qehaXa1UgJG23ahWAZnxZCu3tFgveLUpAcmNUuL17+WZ5IZ0Z3z1WBWibVsz1Qlqe1yUrh+j01CCXOObow29H4plrZ/S4Cxg4=
  app:
    master: mentorpaired-backend
    staging: mentorpaired-staging-backend
  run:
  - python manage.py migrate --noinput
